version: v1.0
name: Java
agent:
  machine:
    type: e1-standard-8
    os_image: ubuntu1804
  containers:
    - name: main
      image: 'gradle:6.8.3-jdk15-hotspot'
global_job_config:
  prologue:
    commands:
      - echo $DOCKERHUB_PASSWORD | docker login --username "$DOCKERHUB_USERNAME" --password-stdin
blocks:
  - name: 'kuberig-dsl[build]'
    task:
      jobs:
        - name: Build
          commands:
            - checkout
            - gradle build -x test
      secrets:
        - name: docker-hub-creds
        - name: gradle-setup
    dependencies: []
  - name: 'kuberig-dsl-kubernetes[generation]'
    dependencies:
      - 'kuberig-dsl[build]'
    task:
      secrets:
        - name: gradle-setup
      jobs:
        - name: 'Job #1'
          commands:
            - checkout
            - 'cd kuberig-dsl/vanilla-dsls/kuberig-dsl-kubernetes/kuberig-dsl-kubernetes-${KUBERNETES_VERSION} '
            - gradle build
          matrix:
            - env_var: KUBERNETES_VERSION
              values:
                - v1.14.10
                - v1.15.0
                - v1.15.1
                - v1.15.10
                - v1.15.11
                - v1.15.12
                - v1.15.2
                - v1.15.3
                - v1.15.4
                - v1.15.5
                - v1.15.6
                - v1.15.7
                - v1.15.8
                - v1.15.9
                - v1.16.0
                - v1.16.1
                - v1.16.10
                - v1.16.11
                - v1.16.12
                - v1.16.13
                - v1.16.14
                - v1.16.15
                - v1.16.2
                - v1.16.3
                - v1.16.4
                - v1.16.5
                - v1.16.6
                - v1.16.7
                - v1.16.8
                - v1.16.9
                - v1.17.0
                - v1.17.1
                - v1.17.10
                - v1.17.11
                - v1.17.12
                - v1.17.13
                - v1.17.14
                - v1.17.15
                - v1.17.16
                - v1.17.17
                - v1.17.2
                - v1.17.3
                - v1.17.4
                - v1.17.5
                - v1.17.6
                - v1.17.7
                - v1.17.8
                - v1.17.9
                - v1.18.0
                - v1.18.1
                - v1.18.10
                - v1.18.11
                - v1.18.12
                - v1.18.13
                - v1.18.14
                - v1.18.15
                - v1.18.16
                - v1.18.17
                - v1.18.2
                - v1.18.3
                - v1.18.4
                - v1.18.5
                - v1.18.6
                - v1.18.7
                - v1.18.8
                - v1.18.9
                - v1.19.0
                - v1.19.1
                - v1.19.2
                - v1.19.3
                - v1.19.4
                - v1.19.5
                - v1.19.6
                - v1.19.7
                - v1.19.8
                - v1.19.9
                - v1.20.0
                - v1.20.1
                - v1.20.2
                - v1.20.3
                - v1.20.4
                - v1.20.5
                - ''
